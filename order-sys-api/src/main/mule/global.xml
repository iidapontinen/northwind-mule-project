<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<db:config name="Northwind_database_Config" doc:name="Database Config" doc:id="53965fab-7b36-4c9b-bb49-2c0e552db737" >
		<db:my-sql-connection host="${db.host}" port="${db.port}" user="${db.user}" password="${db.password}" database="${db.database}" />
	</db:config>
	<http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="04908f3b-d33d-41b5-8e9c-c8ad60a60dd6" >
		<http:listener-connection host="0.0.0.0" port="${http.port}" />
	</http:listener-config>
	<configuration-properties doc:name="Configuration properties" doc:id="4da96494-ee51-46d8-b955-a5f9a5c4ecd4" file="${env}.yaml" />
	<global-property doc:name="Global Property" doc:id="62130445-de20-44db-9fd7-1c84ff3c79e1" name="env" value="dev" />
	<configuration doc:name="Configuration" doc:id="c879a856-0f22-4505-b88f-3b11e2c132f8" defaultErrorHandler-ref="GLOBALERRORHANDLER" />
	<error-handler name="GLOBALERRORHANDLER" doc:id="719b381d-763e-48bb-bcfd-a065eddde5bf" >
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="38cd3288-8d9a-4627-9cd8-7a83186c550d" type="DB:BAD_SQL_SYNTAX">
			<set-payload value='#[error.description as String ++ "There is an error in SQL query."]' doc:name="Set Payload" doc:id="57a22fd2-db3a-422e-b016-378864c2f94c" />
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="7f016087-ab06-4352-b20f-f328f13b956e" type="DB:CONNECTIVITY">
			<set-payload value='#[error.description as String ++ "Failed to connect to Database"]' doc:name="Set Payload" doc:id="ce2afcc5-b42c-4334-bbd2-2471c7dd3a84" />
		</on-error-continue>
<!-- [STUDIO:"On Error Propagate"]		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="3bb60691-222c-41ea-8917-1470f2430c7c" type="DB:ANY">
			<set-payload value="#[payload]" doc:name="Set Payload" doc:id="5871ee74-fafc-4b1c-a84f-3b0f124f1098" />
		</on-error-propagate> [STUDIO] -->
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="6e55f3b6-931a-4581-9a1f-dfeabc1ceea6" type="HTTP:CONNECTIVITY">
			<set-payload value='#[error.errorType as String ++ "This is connection a failure" as String]' doc:name="Set Payload" doc:id="49209b8a-c898-4a4c-9131-a20fab627233" />
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="b36d5ebd-bbc9-4968-8cd2-92e4e2c0802b" type="HTTP:BAD_REQUEST">
			<set-payload value='#[error.errorType as String ++ "This is an error in system api" as String]' doc:name="Set Payload" doc:id="ccd470ac-b8cc-417b-a9ff-d4c3b9b11a8b" />
		</on-error-continue>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="f31ec22d-66f3-4647-a707-662f2929ab86" type="ANY">
			<set-payload value="#[error.description as String ++ error.description as String]" doc:name="Set Payload" doc:id="fc9c1ba7-eb87-49cc-ba90-5e2114e5052c" />
		</on-error-propagate>
	</error-handler>
</mule>
